import 'package:flutter/material.dart';

class MyApp extends StatefulWidget {
  @override
  _MyAppState createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _animation;

  @override
  void initState() {
    super.initState();
    _animationController = AnimationController(
      vsync: this,
      duration: Duration(milliseconds: 500),
    );
    _animation = CurvedAnimation(
      parent: _animationController,
      curve: Curves.easeInOut,
    );
  }

  @override
  void dispose() {
    _animationController.dispose();
    super.dispose();
  }

  void _toggleMenu() {
    if (_animationController.isDismissed) {
      _animationController.forward();
    } else {
      _animationController.reverse();
    }
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'AppBar with Animated Menu',
      home: Scaffold(
        appBar: AppBar(
          title: Text('AppBar with Animated Menu'),
          actions: [
            SizeTransition(
              sizeFactor: _animation,
              axisAlignment: -1.0,
              child: PopupMenuButton(
                itemBuilder: (BuildContext context) {
                  return [
                    PopupMenuItem(
                      child: Text('Menu Item 1'),
                      value: 'item1',
                    ),
                    PopupMenuItem(
                      child: Text('Menu Item 2'),
                      value: 'item2',
                    ),
                    PopupMenuItem(
                      child: Text('Menu Item 3'),
                      value: 'item3',
                    ),
                  ];
                },
                onSelected: (value) {
                  // Handle menu item selection
                  if (value == 'item1') {
                    // Do something for Menu Item 1
                  } else if (value == 'item2') {
                    // Do something for Menu Item 2
                  } else if (value == 'item3') {
                    // Do something for Menu Item 3
                  }
                  _toggleMenu(); // Close the menu
                },
              ),
            ),
          ],
        ),
        body: Center(
          child: Text('Content goes here'),
        ),
      ),
    );
  }
}

void main() {
  runApp(MyApp());
}

